<ul class="collection with-header" id="room-infos">
    <li class="collection-header"><h4 id="roomname">{{room.name}}</h4></li>
    <li class="collection-item">ID<span class="secondary-content">{{room.id}}</span></li>
</ul>
<a href="#" id="start-room-{{room.id}}" class="btn">Start</a>
<a href="#" id="stop-room-{{room.id}}" class="btn hide">Started</a>
<a href="/rooms/{{room.id}}/leave" class="btn">Leave</a>
<script src="/javascripts/room.js"></script>
<script>
    const socket = io();
    updateRoom({{room.id}});
    socket.on('entered room ' + {{room.id}}, function(user){
        M.toast({
            html: user.name + ' entered this Room',
            classes: 'rounded'
        });
        updateRoom({{room.id}});
    });
    socket.on('left room ' + {{room.id}}, function(user){
        M.toast({
            html: user.name + ' left this Room',
            classes: 'rounded'
        });
        updateRoom({{room.id}});
    });
    socket.on('change room ' + {{room.id}}, function(roomId){
        updateRoom({{room.id}});
    });
    $('#start-room-{{room.id}}').click(function(){
        fetch('/rooms/' + {{room.id}} + '/start').then(
            res => {
                socket.emit('change room', {{room.id}});
            }
        );
    });
    $('#stop-room-{{room.id}}').click(function(){
        fetch('/rooms/' + {{room.id}} + '/stop').then(
                res => {
                    socket.emit('change room', {{room.id}});
                }
        );
    });
</script>